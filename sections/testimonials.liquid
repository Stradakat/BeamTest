<div class="mt2 mb5--md">
    <div>
        <div class="next-image pa full-width">
            {% for block in section.blocks %}
            <div class="row">
                <div class="col c4--md mb2 mb0--md mt0">
                    <div class="">
                        <div class="pr">
                            <div class="push-up" style="border-radius: 20px;">
                                <picture class="full-width">
                                    <source srcset="{{ block.settings.testimonial_image | img_url: '1024x1024' }}"
                                        media="(min-width: 800px)" />
                                    <div class="gradient-container pt3"
                                        style="display: inline-block; background: linear-gradient(to bottom, rgba(0,0,0,0) 0%,rgba(62, 77.3, 97.6) 100%); border-radius: 20px;">
                                        <img loading="lazy" class=""
                                            style="height: 70vh; max-height: 720px; max-width: 20vw; object-fit: cover; object-position: top; border-radius: 20px; z-index: -1; position: relative;"
                                            src="{{ block.settings.testimonial_image | img_url: '1024x1024' }}"
                                            alt="{{block.settings.testimonial_image.alt}}">
                                    </div>
                                </picture>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="right-div-container">
        <div class="testimonial-slider pt2--md pb2--md pl0 pr0 ml2 mr0">
            {% for block in section.blocks %}
            <div class="row">
                <div class="col c4--md mb2 mb0--md ml8 testimonial-image-container">
                    <div class="">
                        <div class="pr">
                            <div class="push-up" style="border-radius: 20px;">
                                <picture class="full-width">
                                    <source srcset="{{ block.settings.testimonial_image | img_url: '1024x1024' }}"
                                        media="(min-width: 800px)" />
                                    <img loading="lazy" class="mt1 ml9 testimonial-image"
                                        style="height: 70vh; max-height: 720px; width: 30vw; object-fit: cover; object-position: top; border-radius: 20px;"
                                        src="{{ block.settings.testimonial_image | img_url: '1024x1024' }}"
                                        alt="{{block.settings.testimonial_image.alt}}">
                                </picture>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col c6--md tc tl--md pl5 testimonial-content">
                    <div class="quote-icon" style="display: flex; flex-direction: row; justify-content: center; width: 100%; margin-bottom: -9%;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="53" height="102" viewBox="0 0 53 102">
                            <text id="_" data-name="“" transform="translate(3)" fill="#9ec5f9" font-size="102" font-family="HoeflerText-Black, Hoefler Text" font-weight="800" letter-spacing="0.014em"><tspan x="-2.051" y="74">“</tspan></text>
                          </svg>
                    </div>
                    <h2 class="tc fw--600 sans--medium mb2 color--blue capitalize" style="font-size: 30px;">
                        {{block.settings.title}}</h2>
                    <h3 class="tc fw--300 sans--medium mb2" style="font-style: italic; font-size: 18px;">
                        {{block.settings.subtitle}}</h3>
                    <h3 class="tc fw--300 sans--medium mb2" style="font-size: 18px;">
                        {{block.settings.description}}</h3>
                </div>
            </div>
            {% endfor %}

        </div>
    <div class="col c3--md push-up bubble-slider-container">
        <div class="bubble-slider pt--xl"
            style="display: flex; flex-direction: row; justify-content: center; align-items: center;">
            {% for block in section.blocks %}
            <div class="push-up">
                <picture class="">
                    <source srcset="{{ block.settings.headshot_image | img_url: '200x200' }}"
                        media="(min-width: 800px)" />
                    <img loading="lazy" class="bubble-slide" style="object-fit: cover; object-position: top; border-radius: 50%;"
                        src="{{ block.settings.headshot_image | img_url: '200x200' }}"
                        alt="{{block.settings.headshot_image.alt}}">
                </picture>
            </div>
            {% endfor %}
        </div>
    </div>
    </div>
  </div>
</div>

<script>
    $(document).ready(function () {
        $('.testimonial-slider').slick({
            infinite: true,
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            useTransform: true,
            cssEase: 'ease-in-out',
            fade: true,
            adaptiveHeight: true,
            asNavFor: $('.bubble-slider , .next-image'),
            responsive: [
                {
                breakpoint: 1000,
                settings: {
                    cssEase: 'slidein',
                    }
                },
            ]
        });
        $('.bubble-slider').slick({
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 1,
            centerMode: true,
            centerPadding: 0,
            arrows: true,
            asNavFor: $('.testimonial-slider , .next-image'),
            prevArrow: '<button class="slide-arrow prev-arrow"></button>',
            nextArrow: '<button class="slide-arrow next-arrow"></button>',
            useTransform: true,
            cssEase: 'ease-in-out',
            focusOnSelect: true,
            adaptiveHeight: true,
            responsive: [
                {
                breakpoint: 500,
                settings: {
                    cssEase: 'ease-out',
                    }
                },
            ]
        });
        $('.next-image').slick({
            infinite: true,
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            initialSlide: 1,
            cssEase: 'slidein',
            centerMode: true,
            useTransform: true,
            fade: true,
        });
        $('.bubble-slider').on('afterChange', function (event, slick, currentSlide, nextSlide) {
            changeSlide = currentSlide + 1;
            $('.next-image').slick('slickGoTo', changeSlide);
        });

    });
</script>
<style>
    .testimonial-slider .row>.col {
        vertical-align: middle;
    }
    .right-div-container {
        display: flex;
        flex-direction: column;
    }
    .bubble-slider .slick-slider .slick-list {
        width: 30vw;
    }

    .bubble-slider .slick-initialized .slick-slide {
        display: flex;
        align-items: center;
    }

    .bubble-slider .slick-slide {
        height: 100px;
        display: flex;
        align-items: center;
        justify-content:  center;
    }

    .bubble-slider .slick-slide img {
        height: 45px;
        width: 45px;
    }

    .bubble-slider .slick-slide.slick-current img {
        height: 100px;
        width: 100px;
        margin-right: 5%;
       
    }

    .bubble-slider .slick-slide.slick-current {
        /* width: 100px !important; */
        display: flex;
        justify-content: center;
    }
    

    .bubble-slider .slick-arrow {
        display: block !important;
    }

    .next-image .slick-arrow {
        display: block !important;
    }

    .next-image .slick-slide.slick-current .gradient-container {
        margin-left: -1vw;
    }
    .next-image .slick-slide.slick-current img {
        margin-left: -9vw;
    }

    .bubble-slider .slick-slider .slick-track {
        width: 30vw;
    }
    .bubble-slider .slick-track {
        display: flex !important;
        justify-content: center !important;
        padding-top: 20px;
    }

    .slide-arrow {
        position: absolute;
        top: 50%;
        margin-top: -15px;
    }

    .next-arrow {
        right: -60px;
        width: 25px;
        height: 100%;
        background-image: url('https://cdn.shopify.com/s/files/1/0264/4076/1399/t/35/assets/slick-next.png?v=1639411465');
        background-repeat: no-repeat;
        height: 20px;
        top: 75px;
    }

    .prev-arrow {
        top: 75px;
        left: -50px;
        width: 25px;
        height: 100%;
        height: 20px;
        background-image: url('https://cdn.shopify.com/s/files/1/0264/4076/1399/t/35/assets/slick-prev.png?v=1639411540');
        background-repeat: no-repeat;
    }
    .testimonial-content {
        padding-left: 15% !important;
    }
    
    .bubble-slider-container {
        margin-left: 59%;
        margin-top: -10%;
    }
@media only screen and (min-width: 1800px) {
    .testimonial-image {
        padding-left: 150px;
    }

}

@media only screen and (min-width: 1800px) {
    .testimonial-image {
        margin-left: 120px;
    }

}

@media only screen and (min-width: 2100px) {
    .testimonial-image {
        margin-left: 200px;
    }

}
@media only screen and (max-width: 1200px) {
    .bubble-slider-container {
        width: 30% !important;
    }
    
}
    @media only screen and (max-width: 1000px) {
        .right-div-container {
        display: flex;
        flex-direction: column-reverse;
    }
        .testimonial-slider {
        margin: auto 0;
        }
    .bubble-slider-container {
        left: 0%;
        margin: auto;
        width: 40% !important;
    }
    .next-image {
        display: none;
    }
    .testimonial-image-container {
    display: none !important;
    }
    .right-div-container .slick-slide.slick-current {
        display: flex;
        justify-content: center;
    }
    .testimonial-content {
        padding: 0 5% !important;
        width: 70% !important;
    }
    .bubble-slider-container {
        width: 50% !important;
    }
}
@media only screen and (max-width: 860px) {
    .bubble-slider-container {
        width: 50%;
    }
    .testimonial-content {
        padding-top: 0vh !important;
    }
}

@media only screen and (max-width: 800px) {

    .bubble-slider .slick-slide {
        height: 125px;
        display: flex;
        align-items: center;
        justify-content:  center;
    }

    .bubble-slider .slick-slide.slick-current img {
        height: 125px;
        width: 125px;
        margin-right: 5%;
       
    }
    .bubble-slider-container {
        width: 65% !important;
    }
    .next-arrow {
        right: -20px;
        top: 88px;
    }
    .prev-arrow {
        left: -20px;
        top: 88px;
    }
    .testimonial-content {
        padding-top: 3vh !important;
    }
    .quote-icon {
        display: none !important;
    }
}
@media only screen and (max-width: 520px) {
    .testimonial-content {
        width: 90% !important;
    }
    .bubble-slider-container {
        width: 85% !important;
    }
}

@media only screen and (max-width: 520px) {
    .testimonial-content {
        width: 90% !important;
    }
    .bubble-slider-container {
        width: 85% !important;
    }
}


@media only screen and (max-width: 475px) {
    .next-arrow {
        right: -20px;
    }
    .prev-arrow {
        left: -20px;
    }
    .bubble-slider .slick-slide.slick-current {
    width: 6% !important;
    }
    .bubble-slider-container {
        width: 85%;
    }
}
@media only screen and (max-width: 400px) {
    .next-arrow {
        top: 63px;
    }
    .prev-arrow {
        top: 63px;
    }
    .bubble-slider .slick-slide {
        margin: 0 10px;
    }
    .bubble-slider-container {
        width: 85% !important;
    }
    .testimonial-content {
        padding-top: 12vh !important;
    }
    .bubble-slider {
        height: 50px;
        padding-top: 5vh;
    }
    
    
}
</style>

{% schema %}
{
"name": {
"en": "Testimonials"
},
"blocks": [
{
"type": "testimonials_block",
"name": {
"en": "Testimonial"
},
"settings": [
{
"type":"image_picker",
"id":"testimonial_image",
"label":"testimonial image"
},
{
"type":"image_picker",
"id":"headshot_image",
"label":"headshot image"
},
{
"type": "text",
"id": "title",
"label": "Name"
},
{
"type": "text",
"id": "subtitle",
"label": "Subtitle"
},
{
"type": "text",
"id": "description",
"label": "Description"
}
]
}
],
"presets": [
{
"name": {
"en": "Testimonials"
},
"category": {
"cs": "Text",
"da": "Tekst",
"de": "Text",
"en": "Text",
"es": "Texto",
"fi": "Teksti",
"fr": "Texte",
"it": "Testo",
"ja": "テキスト",
"ko": "텍스트",
"nb": "Tekst",
"nl": "Tekst",
"pl": "Tekst",
"pt-BR": "Texto",
"pt-PT": "Texto",
"sv": "Text",
"th": "ข้อความ",
"tr": "Metin",
"vi": "Văn bản",
"zh-CN": "文本",
"zh-TW": "文字"
}
}
]
}
{% endschema %}